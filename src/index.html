<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>InfectStatisticWeb</title>
		<!-- 引入 echarts.js -->
		<link rel="stylesheet" type="text/css" href="css/index.css" />
		<script src="js/echarts.min.js"></script>
		<script type="text/javascript" src="js/china.js"></script>
		<script type="text/javascript" src="js/data.js"></script>
		<style>
			body {
				background-color: #10aeb5;
			}
			#home {
				background-color: white;
				width: 60%;
				margin: 0 20%;
				border-radius: 10px;
				min-height: 300px;
				padding: 10px;
			}
			.board {
				margin-top: 50px;
				display: -webkit-box;
				display: -ms-flexbox;
				display: flex;
				-ms-flex-wrap: nowrap;
			}
			.board-item {
				flex: 1 1 30%;
				text-align: center;
			}
			.board-item span {
				font-size: 20px;
			}
			.board-item-1 {
				font-size: .9375rem;
				height: .9375rem;
				line-height: .9375rem;
				margin-bottom: .625rem;
				color: #333;
				position: relative;
			}
			.board-item-number{
				height: 1.3125rem;
				line-height: 1.3125rem;
				font-family: "Fira Code", monospace;
				font-weight: 700;
				font-size: 30px;
			}
			#map {
				width: 800px;
				height: 600px;
				margin: 0 auto;
			}
		</style>
	</head>
	<body>
	<div style="text-align: center"><img src="./img/img.png"/></div>
	<div id="home">

		<span style="color: gray; float: left;margin-bottom: 1.5rem; width: 100%">数据更新至2020-3-15</span>
		<div style="margin-top: 1.25rem; margin-bottom: 50px;">
			<div class="board">
				<div class="board-item">
					<div class="board-item-1">
						<span style="position: relative">现有确诊</span>
					</div>
					<div id="currentConfirmedCount" style="color: #ff6a57;" class="board-item-number">12160</div>
				</div>
				<div class="board-item">
					<div class="board-item-1">
						<span style="position: relative">现有疑似</span>
					</div>
					<div id="suspectedCount" style="color: #ec9217" class="board-item-number">95</div>
				</div>
				<div class="board-item">
					<div class="board-item-1">
						<span style="position: relative">现有重症</span>
					</div>
					<div id="seriousCount" style="color: #476da0" class="board-item-number">3610</div>
				</div>
			</div>
			<div class="board">
				<div class="board-item">
					<div class="board-item-1">
						<span style="position: relative">累计确诊</span>
					</div>
					<div id="confirmedCount" style="color: #e83132" class="board-item-number">81029</div>
				</div>
				<div class="board-item">
					<div class="board-item-1">
						<span style="position: relative">累计治愈</span>
					</div>
					<div id="curedCount" style="color: #10aeb5" class="board-item-number">65675</div>
				</div>
				<div class="board-item">
					<div class="board-item-1">
						<span style="position: relative">累计死亡</span>
					</div>
					<div id="deadCount" style="color: #4d5054" class="board-item-number">3194</div>
				</div>
			</div>
		</div>
		<div style="width: 100%;height: 100%;">

			<!-- 为ECharts准备一个具备大小（宽高）的Dom -->
			<div id="broad">
				&nbsp;疫情地图
			</div>
			<div id="main"></div>
			<br />
			<br />
			<div id="broad">
				&nbsp;疫情趋势
			</div>
			<div id="main_two"></div>
			<div id="foot">
				<div id="foot_l" class="foot_intem" onclick="draw()">新增确证/疑似确证</div>
				<div id="foot_c" class="foot_intem" onclick="drawSec()">累计治愈/死亡趋势</div>
				<!-- <div id="foot_r" class="foot_intem" onclick="goBack()">返回首页</div> -->
			</div>
		</div>

	</div>

		<script type="text/javascript">
			// 基于准备好的dom，初始化echarts实例
			window.onload = function(){
				draw();
			}
			var myChart = echarts.init(document.getElementById('main'));
			
			// 指定图表的配置项和数据
			var option = {
				backgroundColor: '#FFFFFF',
				// title: {  
				//     text: '全国地图大数据',  
				//     subtext: '',  
				//     x:'center'  
				// },  
				tooltip: {
					trigger: 'item'
				},
				//左侧小导航图标
				visualMap: {
					show: true,
					x: 'left',
					y: 'bottom',
					splitList: [{
							start: 10000
						}, {
							start: 1000,
							end: 10000
						},
						{
							start: 500,
							end: 999
						}, {
							start: 100,
							end: 499
						},
						{
							start: 10,
							end: 99
						}, {
							start: 1,
							end: 9
						}, {
							end: 0
						}
					],
					color: ['#660208', '#8C0D0D', '#CC2929', '#FF7B69', '#FFAA85', '#FACD91', '#F2F2F2']
				},

				//配置属性
				series: [{
					name: '数据',
					type: 'map',
					mapType: 'china',
					roam: true,
					label: {
						normal: {
							show: true //省份名称  
						},
						emphasis: {
							show: false
						}
					},
					data: mydata //数据
				}],

				scaleLimit: {
					min: 1,
					max: 1.5,
				},
			};

			// 使用刚指定的配置项和数据显示图表。
			myChart.setOption(option);
			myChart.on('click', function(params) {
				// 控制台打印数据的名称
				console.log(params.name);
				window.localStorage.setItem("name", params.name);
				window.location.href = 'loading.html';
			});

			function draw() {
				var target = document.getElementById("foot_l");
				target.style.color = "white";
				target.style.backgroundColor = "#00BEC9";
				var untarget = document.getElementById("foot_c")
				untarget.style.color = '#00BEC9';
				untarget.style.backgroundColor = "white";
				var name = window.localStorage.getItem("name");
				var myChart1 = echarts.init(document.getElementById('main_two'));
				let myoption = BaseOption;
				myoption.title.text =  '全国新增确诊/疑似趋势'
				myoption.legend.data = ['新增确诊', '新增疑似'],
					myoption.series = [{
							name: '新增确诊',
							type: 'line',
							stack: '总量',
							data: [1737, 1982, 2102, 2590, 2829, 3235, 3887, 3694, 3143, 3399, 2656, 3062, 2478, 2015, 5152]
						},
						{
							name: '新增疑似',
							type: 'line',
							stack: '总量',
							data: [4148, 4812, 5019, 4562, 5173, 5072, 3971, 5328, 4833, 4214, 3916, 4008, 3536, 3342, 2807]
						}
					]
				myChart1.setOption(myoption);

			}

			function drawSec() {
				var target = document.getElementById("foot_c");
				target.style.color = "white";
				target.style.backgroundColor = "#00BEC9";
				var untarget = document.getElementById("foot_l")
				untarget.style.color = '#00BEC9';
				untarget.style.backgroundColor = "white";
				var myChart1 = echarts.init(document.getElementById('main_two'));
				let myoption = BaseOption;
				myoption.title.text =  '全国累计治愈/累计死亡'
				myoption.legend.data = ['累计治愈', '累计死亡'],
					myoption.series = [{
							name: '累计治愈',
							type: 'line',
							stack: '总量',
							data: [124, 171, 243, 328, 475, 632, 892, 1153, 1540, 2050, 2649, 3281, 3996, 4740, 5911],
						},
						{
							name: '累计死亡',
							type: 'line',
							stack: '总量',
							data: [170, 213, 259, 304, 361, 425, 490, 563, 636, 722, 908, 1016, 1113, 1367, 1380]
						}
					]
				myChart1.setOption(myoption);

			}
		</script>
	</body>
</html>
